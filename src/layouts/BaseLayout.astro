---
import { ViewTransitions } from "astro:transitions";
import "../styles/global.css";
import "../styles/elements/btn-blog.css";
import "../styles/elements/manifiestos.css";
interface Props {
  title: string;
  description?: string;
  color?: string;
  theme?: string;
}

const { title, description = "Descubre la región", color, theme } = Astro.props;
const currentPath = Astro.url.pathname;
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <link rel="icon" type="image/x-icon" href="/image/logo.ico" />
    <ViewTransitions />
    <title>Mi Pueblo Magico - {title} - Huauchinango</title>
  </head>
  <body>
    <header style={color}>
      <nav>
        <a href="/" class="logo"
          ><img
            src="/image/Logo_de_los_Pueblos_Mágicos_de_México.svg.png"
            alt="Pueblos Mágicos de México"
          />
          <span>Huauchinango</span></a
        >
        <button class="menu-toggle" aria-label="Toggle menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <ul class="nav-links">
          <li>
            <a href="/" class={currentPath === "/" ? "active" : ""}>Inicio</a>
          </li>
          <li>
            <a
              href="/turismo"
              class={currentPath === "/turismo" ? "active" : ""}>Turismo</a
            >
          </li>
          <li>
            <a href="/flora" class={currentPath === "/flora" ? "active" : ""}
              >Flora</a
            >
          </li>
          <li>
            <a
              href="/gastronomia"
              class={currentPath === "/gastronomia" ? "active" : ""}
              >Gastronomía</a
            >
          </li>
          <li>
            <a
              href="/blog"
              class={currentPath.startsWith("/blog") ? "active" : ""}>Blog</a
            >
          </li>
        </ul>
      </nav>
    </header>
    <script>
      (function () {
        function getToggle() {
          return document.querySelector(".menu-toggle");
        }
        function getNav() {
          return document.querySelector(".nav-links");
        }

        document.addEventListener("click", function (e) {
          const toggleClicked = (e.target as Element).closest
            ? (e.target as Element).closest(".menu-toggle")
            : null;

          if (toggleClicked) {
            const btn = getToggle();
            const nav = getNav();
            btn?.classList.toggle("active");
            nav?.classList.toggle("active");
            return;
          }

          const navLink = (e.target as Element).closest
            ? (e.target as Element).closest(".nav-links a")
            : null;
          if (navLink) {
            getToggle()?.classList.remove("active");
            getNav()?.classList.remove("active");
            return;
          }

          if (!(e.target as Element).closest || !(e.target as Element).closest("nav")) {
            getToggle()?.classList.remove("active");
            getNav()?.classList.remove("active");
          }
        });
      })();
    </script>


    <main>
      <slot />
    </main>


    <footer>
      <p>&copy; 2024 Turismo Huauchinango - Desarrollo Sustentable</p>
      <p>Sitio web informativo sobre la región de Huauchinango</p>
    </footer>
  </body>
</html>
